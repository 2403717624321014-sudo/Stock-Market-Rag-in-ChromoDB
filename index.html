<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>StockRAG ‚Äî NIFTY 50 AI Query Engine</title>
    <meta name="description"
        content="Ask questions about NIFTY 50 stocks using our AI-powered Retrieval-Augmented Generation engine. Get real-time market insights, analysis, and trading signals." />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap"
        rel="stylesheet" />
    <link rel="stylesheet" href="/static/style.css" />
</head>

<body>

    <!-- ===== ANIMATED BACKGROUND ===== -->
    <div class="bg-canvas" aria-hidden="true">
        <div class="bg-grid"></div>
        <div class="orb orb-1"></div>
        <div class="orb orb-2"></div>
        <div class="orb orb-3"></div>
        <!-- Ticker tape -->
        <div class="ticker-tape" id="tickerTape"></div>
    </div>

    <!-- ===== TOAST CONTAINER ===== -->
    <div class="toast-container" id="toastContainer" aria-live="polite"></div>

    <!-- ===== HEADER ===== -->
    <header class="header" role="banner">
        <div class="header-inner">
            <div class="logo-group">
                <div class="logo-icon" aria-hidden="true">
                    <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
                        <path d="M4 24 L10 16 L16 20 L22 8 L28 12" stroke="url(#g1)" stroke-width="2.5"
                            stroke-linecap="round" stroke-linejoin="round" />
                        <defs>
                            <linearGradient id="g1" x1="4" y1="24" x2="28" y2="8" gradientUnits="userSpaceOnUse">
                                <stop offset="0%" stop-color="#00d4ff" />
                                <stop offset="100%" stop-color="#7b61ff" />
                            </linearGradient>
                        </defs>
                    </svg>
                </div>
                <div>
                    <h1 class="logo-title">StockRAG</h1>
                    <p class="logo-sub">NIFTY 50 AI Engine</p>
                </div>
            </div>

            <nav class="header-nav" aria-label="Main navigation">
                <div class="status-badge" id="statusBadge">
                    <span class="status-dot" id="statusDot"></span>
                    <span id="statusText">Connecting‚Ä¶</span>
                </div>
                <div class="db-counter" id="dbCounter" title="Documents indexed">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <ellipse cx="12" cy="5" rx="9" ry="3" />
                        <path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3" />
                        <path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5" />
                    </svg>
                    <span id="docCount">‚Äî</span> docs
                </div>
                <button class="history-toggle-btn" id="historyToggleBtn" title="Query History"
                    aria-label="Toggle history panel">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M3 3h18M3 9h18M3 15h12M3 21h8" />
                    </svg>
                    History
                </button>
            </nav>
        </div>
    </header>

    <!-- ===== HISTORY DRAWER ===== -->
    <aside class="history-drawer" id="historyDrawer" aria-label="Query history" hidden>
        <div class="history-header">
            <span class="history-title">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10" />
                    <polyline points="12 6 12 12 16 14" />
                </svg>
                Recent Queries
            </span>
            <div style="display:flex;gap:8px">
                <button class="history-clear-btn" id="historyClearBtn" title="Clear history">Clear</button>
                <button class="history-close-btn" id="historyCloseBtn" aria-label="Close history">‚úï</button>
            </div>
        </div>
        <ul class="history-list" id="historyList">
            <li class="history-empty">No queries yet. Ask something!</li>
        </ul>
    </aside>
    <div class="history-overlay" id="historyOverlay" hidden></div>

    <!-- ===== MAIN ===== -->
    <main class="main-layout" role="main">

        <!-- ===== HERO SECTION ===== -->
        <section class="hero" aria-labelledby="hero-heading">
            <div class="hero-eyebrow">
                <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
                    <circle cx="12" cy="12" r="5" />
                </svg>
                Powered by ChromaDB + Sentence Transformers
            </div>
            <h2 id="hero-heading" class="hero-heading">
                Ask Anything About<br />
                <span class="gradient-text">NIFTY 50 Markets</span>
            </h2>
            <p class="hero-sub">
                Our RAG engine retrieves relevant market documents from the vector database
                and generates focused, fact-driven answers in real time.
            </p>
            <!-- Mini Metric Row -->
            <div class="hero-metrics" id="heroMetrics">
                <div class="hero-metric">
                    <span class="hero-metric-val" id="hm-docs">‚Äî</span>
                    <span class="hero-metric-label">Docs Indexed</span>
                </div>
                <div class="hero-metric-divider"></div>
                <div class="hero-metric">
                    <span class="hero-metric-val">384</span>
                    <span class="hero-metric-label">Vector Dims</span>
                </div>
                <div class="hero-metric-divider"></div>
                <div class="hero-metric">
                    <span class="hero-metric-val">NIFTY 50</span>
                    <span class="hero-metric-label">Coverage</span>
                </div>
                <div class="hero-metric-divider"></div>
                <div class="hero-metric">
                    <span class="hero-metric-val" id="hm-queries">0</span>
                    <span class="hero-metric-label">Queries Run</span>
                </div>
            </div>
        </section>

        <!-- ===== QUERY PANEL ===== -->
        <section class="query-panel glass-panel" aria-label="Stock query form">
            <div class="query-header">
                <span class="query-label">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="11" cy="11" r="8" />
                        <line x1="21" y1="21" x2="16.65" y2="16.65" />
                    </svg>
                    Ask the AI
                </span>
                <span class="query-hint" id="charCount">0 / 500</span>
            </div>

            <div class="input-wrapper">
                <textarea id="queryInput" class="query-input"
                    placeholder="e.g. What is the share price of Reliance? How is HDFC Bank performing? What is the NIFTY 50 outlook?"
                    rows="3" maxlength="500" aria-label="Enter your stock market question"
                    aria-describedby="charCount"></textarea>
                <button id="submitBtn" class="submit-btn" aria-label="Submit question" disabled>
                    <span class="btn-text">Ask AI</span>
                    <svg class="btn-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                        stroke-width="2.5">
                        <path d="M22 2L11 13" />
                        <path d="M22 2L15 22 11 13 2 9l20-7z" />
                    </svg>
                    <span class="btn-loader" aria-hidden="true"></span>
                </button>
            </div>

            <!-- Suggested chips -->
            <div class="chips-row" role="list" aria-label="Suggested queries">
                <button class="chip" role="listitem" data-query="What is the share price of Reliance?">üìà Reliance
                    price</button>
                <button class="chip" role="listitem" data-query="How is HDFC Bank performing in the market?">üè¶ HDFC
                    Bank</button>
                <button class="chip" role="listitem" data-query="What is the NIFTY 50 index level today?">üìä NIFTY 50
                    index</button>
                <button class="chip" role="listitem" data-query="Tell me about TCS quarterly results">üíª TCS
                    results</button>
                <button class="chip" role="listitem" data-query="What is the outlook for the IT sector?">üî≠ IT
                    sector</button>
                <button class="chip" role="listitem" data-query="How is SBI stock doing?">üèõÔ∏è SBI stock</button>
                <button class="chip" role="listitem" data-query="What are the top performing NIFTY 50 stocks?">üèÜ Top
                    stocks</button>
                <button class="chip" role="listitem" data-query="What is Infosys revenue and profit?">üî¢ Infosys
                    financials</button>
            </div>
        </section>

        <!-- ===== SKELETON LOADER ===== -->
        <div class="skeleton-section" id="skeletonSection" hidden>
            <div class="skeleton-card glass-panel">
                <div class="skeleton-header">
                    <div class="skeleton-avatar"></div>
                    <div class="skeleton-lines">
                        <div class="skeleton-line w-40"></div>
                        <div class="skeleton-line w-70"></div>
                    </div>
                </div>
                <div class="skeleton-body">
                    <div class="skeleton-line w-100"></div>
                    <div class="skeleton-line w-90"></div>
                    <div class="skeleton-line w-80"></div>
                    <div class="skeleton-line w-60"></div>
                </div>
            </div>
            <div class="skeleton-stats">
                <div class="skeleton-stat glass-panel"></div>
                <div class="skeleton-stat glass-panel"></div>
                <div class="skeleton-stat glass-panel"></div>
                <div class="skeleton-stat glass-panel"></div>
                <div class="skeleton-stat glass-panel"></div>
            </div>
        </div>

        <!-- ===== RESULTS SECTION (hidden initially) ===== -->
        <section class="results-section" id="resultsSection" aria-live="polite" aria-label="Query results" hidden>

            <!-- AI Answer Card -->
            <div class="answer-card glass-panel" id="answerCard">
                <div class="answer-header">
                    <div class="ai-avatar" aria-hidden="true">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path
                                d="M12 2a2 2 0 0 1 2 2c0 .74-.4 1.39-1 1.73V7h1a7 7 0 0 1 7 7h1a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v1a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-1H2a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h1a7 7 0 0 1 7-7h1V5.73c-.6-.34-1-.99-1-1.73a2 2 0 0 1 2-2z" />
                            <circle cx="9" cy="14" r="1" />
                            <circle cx="15" cy="14" r="1" />
                        </svg>
                    </div>
                    <div>
                        <h3 class="answer-title">AI Answer</h3>
                        <p class="answer-question" id="answerQuestion"></p>
                    </div>
                    <button class="copy-btn" id="copyAnswerBtn" title="Copy answer"
                        aria-label="Copy answer to clipboard">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2" />
                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1" />
                        </svg>
                        Copy
                    </button>
                </div>
                <div class="answer-body" id="answerBody"></div>
                <div class="answer-footer">
                    <span class="answer-meta" id="answerMeta"></span>
                </div>
            </div>

            <!-- Stats Row -->
            <div class="stats-grid" id="statsGrid" aria-label="Statistical analysis">
                <div class="stat-card glass-panel" id="statMeanPrice">
                    <div class="stat-icon green" aria-hidden="true">‚Çπ</div>
                    <div class="stat-label">Mean Price</div>
                    <div class="stat-value" id="meanPriceVal">‚Äî</div>
                </div>
                <div class="stat-card glass-panel" id="statVolatility">
                    <div class="stat-icon blue" aria-hidden="true">„Äú</div>
                    <div class="stat-label">Volatility</div>
                    <div class="stat-value" id="volatilityVal">‚Äî</div>
                </div>
                <div class="stat-card glass-panel" id="statRisk">
                    <div class="stat-icon orange" aria-hidden="true">‚ö°</div>
                    <div class="stat-label">Risk Level</div>
                    <div class="stat-value" id="riskVal">‚Äî</div>
                </div>
                <div class="stat-card glass-panel" id="statTrend">
                    <div class="stat-icon purple" aria-hidden="true">‚Üó</div>
                    <div class="stat-label">Trend</div>
                    <div class="stat-value" id="trendVal">‚Äî</div>
                </div>
                <div class="stat-card glass-panel signal-card" id="statSignal">
                    <div class="stat-icon signal-icon" aria-hidden="true">‚óé</div>
                    <div class="stat-label">Trading Signal</div>
                    <div class="stat-value signal-value" id="signalVal">‚Äî</div>
                </div>
            </div>

            <!-- Retrieved Documents -->
            <div class="docs-section">
                <div class="docs-heading-row">
                    <h3 class="docs-heading">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />
                            <polyline points="14 2 14 8 20 8" />
                        </svg>
                        Retrieved Documents
                        <span class="docs-count" id="docsCount"></span>
                    </h3>
                    <button class="expand-all-btn" id="expandAllBtn">Expand All</button>
                </div>
                <div class="docs-list" id="docsList" role="list"></div>
            </div>

        </section>

        <!-- ===== ERROR STATE ===== -->
        <div class="error-banner glass-panel" id="errorBanner" hidden role="alert">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="10" />
                <line x1="12" y1="8" x2="12" y2="12" />
                <line x1="12" y1="16" x2="12.01" y2="16" />
            </svg>
            <div>
                <strong>Error</strong>
                <div id="errorText">An error occurred.</div>
            </div>
            <button class="error-close" id="errorClose" aria-label="Dismiss error">‚úï</button>
        </div>

        <!-- ===== HOW IT WORKS ===== -->
        <section class="pipeline-section" aria-labelledby="pipeline-heading">
            <h2 id="pipeline-heading" class="section-heading">How It Works</h2>
            <div class="pipeline-steps">
                <div class="pipeline-step glass-panel">
                    <div class="step-num">01</div>
                    <div class="step-icon" aria-hidden="true">
                        <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="1.5">
                            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" />
                        </svg>
                    </div>
                    <h3>Query Input</h3>
                    <p>You type a natural language question about NIFTY 50 stocks or market trends.</p>
                </div>
                <div class="pipeline-arrow" aria-hidden="true">‚Üí</div>
                <div class="pipeline-step glass-panel">
                    <div class="step-num">02</div>
                    <div class="step-icon" aria-hidden="true">
                        <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="1.5">
                            <circle cx="12" cy="12" r="10" />
                            <path d="M12 6v6l4 2" />
                        </svg>
                    </div>
                    <h3>Embedding</h3>
                    <p>Sentence Transformers (all-MiniLM-L6-v2) convert your query to a 384-dim vector.</p>
                </div>
                <div class="pipeline-arrow" aria-hidden="true">‚Üí</div>
                <div class="pipeline-step glass-panel">
                    <div class="step-num">03</div>
                    <div class="step-icon" aria-hidden="true">
                        <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="1.5">
                            <ellipse cx="12" cy="5" rx="9" ry="3" />
                            <path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3" />
                            <path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5" />
                        </svg>
                    </div>
                    <h3>Vector Search</h3>
                    <p>ChromaDB finds the most semantically similar documents from the NIFTY corpus.</p>
                </div>
                <div class="pipeline-arrow" aria-hidden="true">‚Üí</div>
                <div class="pipeline-step glass-panel">
                    <div class="step-num">04</div>
                    <div class="step-icon" aria-hidden="true">
                        <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="1.5">
                            <polyline points="22 12 18 12 15 21 9 3 6 12 2 12" />
                        </svg>
                    </div>
                    <h3>RAG Answer</h3>
                    <p>Relevant facts are extracted, analysed statistically, and presented as a concise answer.</p>
                </div>
            </div>
        </section>

    </main>

    <!-- ===== FOOTER ===== -->
    <footer class="footer" role="contentinfo">
        <p>StockRAG &mdash; NIFTY 50 AI Query Engine &nbsp;|&nbsp; Built with ChromaDB, Sentence Transformers &amp;
            FastAPI</p>
        <p class="footer-disclaimer">‚ö†Ô∏è For educational purposes only. Not financial advice.</p>
    </footer>

    <script src="/static/app.js"></script>
</body>

</html>